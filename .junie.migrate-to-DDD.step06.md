# ðŸš€ Updated IoT Pilot Server DDD Structure - Step 6

## ðŸ”Œ Task 6: Phase 6 - Device Domain - Use Cases (6-8 days)

### ðŸŽ¯ Overview
This phase focuses on implementing the application layer use cases for the Device domain using the CQRS pattern (Commands and Queries). These components provide the application-specific logic for interacting with the Device domain.

### ðŸ“‹ Tasks

#### Task 6.1: Implement Device Commands
- Implement RegisterDevice command and handler
- Implement UpdateDevice command and handler
- Implement RemoveDevice command and handler
- Implement ActivateDevice command and handler
- Implement DeactivateDevice command and handler
- Implement ExecuteSSHCommand command and handler
- Implement BulkRegisterDevices command and handler

#### Task 6.2: Implement Device Queries
- Implement GetDevice query and handler
- Implement ListDevices query and handler
- Implement GetDeviceMetrics query and handler
- Implement GetDeviceStatus query and handler
- Implement SearchDevices query and handler

#### Task 6.3: Implement Application Services
- Implement DeviceFinder service
- Implement SSHSessionManager service
- Implement DeviceValidator service
- Implement MetricsAggregator service

#### Task 6.4: Create Command and Query Integration Tests
- Integration tests for RegisterDevice command
- Integration tests for UpdateDevice command
- Integration tests for RemoveDevice command
- Integration tests for GetDevice query
- Integration tests for ListDevices query
- Integration tests for GetDeviceMetrics query

#### Task 6.5: Implement Event Handlers
- Implement handlers for DeviceRegistered event
- Implement handlers for DeviceUpdated event
- Implement handlers for DeviceRemoved event
- Implement handlers for DeviceConnected event
- Implement handlers for DeviceDisconnected event
- Implement handlers for SSHSessionStarted event
- Implement handlers for SSHSessionEnded event
- Implement handlers for MetricsCollected event

#### Task 6.6: Create End-to-End Tests
- E2E tests for device registration flow
- E2E tests for device update flow
- E2E tests for device removal flow
- E2E tests for SSH connection flow
- E2E tests for metrics collection flow

### âœ… Task 6.7: Phase 6 Validation
- Device commands implemented
- Device queries implemented
- Application services implemented
- Event handlers implemented
- Integration tests passing
- E2E tests passing
- All existing functionality still works